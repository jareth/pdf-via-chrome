<?xml version="1.0" encoding="UTF-8"?>
<task>
    <task-id>TASK-027</task-id>
    <task-name>Add Tests for Wait Strategies</task-name>
    <phase>Phase 4: Wait Strategies</phase>
    <priority>HIGH</priority>
    <complexity>MODERATE</complexity>
    <status>Completed</status>

    <dependencies>
        <dependency>TASK-025: Implement TimeoutWait Strategy</dependency>
    </dependencies>

    <description>
        Create comprehensive test suite for wait strategy implementations in Version 1,
        including unit tests and integration tests with real Chrome instances.
        Tests for NetworkIdleWait, ElementWait, and CustomConditionWait are deferred to Version 2.
    </description>

    <acceptance-criteria>
        <criterion>Unit tests for each strategy with mocked CDP</criterion>
        <criterion>Integration tests with real Chrome for each strategy</criterion>
        <criterion>Test timeout handling for all strategies</criterion>
        <criterion>Test edge cases and error conditions</criterion>
        <criterion>Test coverage &gt;= 85% for wait package</criterion>
    </acceptance-criteria>

    <implementation-notes>
        <note>
            Integration test scenarios for Version 1:
            - WaitStrategy interface: Test basic contract and common behaviors
            - Timeout: Simple wait verification with various durations
        </note>
        <note>
            Create test HTML pages with controlled timing for timeout scenarios
        </note>
        <note>
            Use Testcontainers for integration tests
        </note>
        <note>
            Note: NetworkIdleWait, ElementWait, and CustomConditionWait testing will be added in Version 2 (Phase 8)
        </note>
    </implementation-notes>

    <affected-files>
        <file>pdf-via-chrome/src/test/java/com/fostermoore/pdfviachrome/wait/WaitStrategyIT.java</file>
        <file>pdf-via-chrome/src/test/resources/test-pages/*.html</file>
    </affected-files>

    <testing-requirements>
        <requirement>All unit tests pass</requirement>
        <requirement>All integration tests pass</requirement>
        <requirement>Code coverage report shows &gt;=85% for wait package</requirement>
    </testing-requirements>

    <estimated-effort>6-8 hours</estimated-effort>
</task>
